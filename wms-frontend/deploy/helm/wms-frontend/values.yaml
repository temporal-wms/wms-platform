# Global configuration
global:
  namespace: wms-frontend
  imageRegistry: wms-platform
  imagePullPolicy: IfNotPresent
  environment: production

# Namespace configuration
namespace:
  create: true
  name: wms-frontend

# Shell app configuration
shell:
  enabled: true
  replicaCount: 2
  image:
    repository: wms-shell
    tag: latest

  service:
    type: ClusterIP
    nodePort: null

  resources:
    requests:
      memory: "64Mi"
      cpu: "50m"
    limits:
      memory: "128Mi"
      cpu: "100m"

  healthCheck:
    enabled: true
    liveness:
      path: /health
      port: 80
      initialDelaySeconds: 10
      periodSeconds: 30
      timeoutSeconds: 5
      failureThreshold: 3
    readiness:
      path: /health
      port: 80
      initialDelaySeconds: 5
      periodSeconds: 10
      timeoutSeconds: 3
      failureThreshold: 3

  autoscaling:
    enabled: false

# Microfrontends configuration
microfrontends:
  orders:
    enabled: true
    replicaCount: 2
    image:
      repository: wms-orders
      tag: latest
    resources:
      requests:
        memory: "32Mi"
        cpu: "25m"
      limits:
        memory: "64Mi"
        cpu: "50m"
    healthCheck:
      enabled: true
      liveness:
        path: /health
        port: 80
        initialDelaySeconds: 10
        periodSeconds: 30
      readiness:
        path: /health
        port: 80
        initialDelaySeconds: 5
        periodSeconds: 10

  waves:
    enabled: true
    replicaCount: 2
    image:
      repository: wms-waves
      tag: latest
    resources:
      requests:
        memory: "32Mi"
        cpu: "25m"
      limits:
        memory: "64Mi"
        cpu: "50m"
    healthCheck:
      enabled: true
      liveness:
        path: /health
        port: 80
        initialDelaySeconds: 10
        periodSeconds: 30
      readiness:
        path: /health
        port: 80
        initialDelaySeconds: 5
        periodSeconds: 10

  inventory:
    enabled: true
    replicaCount: 2
    image:
      repository: wms-inventory
      tag: latest
    resources:
      requests:
        memory: "32Mi"
        cpu: "25m"
      limits:
        memory: "64Mi"
        cpu: "50m"
    healthCheck:
      enabled: true
      liveness:
        path: /health
        port: 80
        initialDelaySeconds: 10
        periodSeconds: 30
      readiness:
        path: /health
        port: 80
        initialDelaySeconds: 5
        periodSeconds: 10

  picking:
    enabled: true
    replicaCount: 2
    image:
      repository: wms-picking
      tag: latest
    resources:
      requests:
        memory: "32Mi"
        cpu: "25m"
      limits:
        memory: "64Mi"
        cpu: "50m"
    healthCheck:
      enabled: true
      liveness:
        path: /health
        port: 80
        initialDelaySeconds: 10
        periodSeconds: 30
      readiness:
        path: /health
        port: 80
        initialDelaySeconds: 5
        periodSeconds: 10

  packing:
    enabled: true
    replicaCount: 2
    image:
      repository: wms-packing
      tag: latest
    resources:
      requests:
        memory: "32Mi"
        cpu: "25m"
      limits:
        memory: "64Mi"
        cpu: "50m"
    healthCheck:
      enabled: true
      liveness:
        path: /health
        port: 80
        initialDelaySeconds: 10
        periodSeconds: 30
      readiness:
        path: /health
        port: 80
        initialDelaySeconds: 5
        periodSeconds: 10

  shipping:
    enabled: true
    replicaCount: 2
    image:
      repository: wms-shipping
      tag: latest
    resources:
      requests:
        memory: "32Mi"
        cpu: "25m"
      limits:
        memory: "64Mi"
        cpu: "50m"
    healthCheck:
      enabled: true
      liveness:
        path: /health
        port: 80
        initialDelaySeconds: 10
        periodSeconds: 30
      readiness:
        path: /health
        port: 80
        initialDelaySeconds: 5
        periodSeconds: 10

  labor:
    enabled: true
    replicaCount: 2
    image:
      repository: wms-labor
      tag: latest
    resources:
      requests:
        memory: "32Mi"
        cpu: "25m"
      limits:
        memory: "64Mi"
        cpu: "50m"
    healthCheck:
      enabled: true
      liveness:
        path: /health
        port: 80
        initialDelaySeconds: 10
        periodSeconds: 30
      readiness:
        path: /health
        port: 80
        initialDelaySeconds: 5
        periodSeconds: 10

  dashboard:
    enabled: true
    replicaCount: 2
    image:
      repository: wms-dashboard
      tag: latest
    resources:
      requests:
        memory: "32Mi"
        cpu: "25m"
      limits:
        memory: "64Mi"
        cpu: "50m"
    healthCheck:
      enabled: true
      liveness:
        path: /health
        port: 80
        initialDelaySeconds: 10
        periodSeconds: 30
      readiness:
        path: /health
        port: 80
        initialDelaySeconds: 5
        periodSeconds: 10

  receiving:
    enabled: true
    replicaCount: 2
    image:
      repository: wms-receiving
      tag: latest
    resources:
      requests:
        memory: "32Mi"
        cpu: "25m"
      limits:
        memory: "64Mi"
        cpu: "50m"
    healthCheck:
      enabled: true
      liveness:
        path: /health
        port: 80
        initialDelaySeconds: 10
        periodSeconds: 30
      readiness:
        path: /health
        port: 80
        initialDelaySeconds: 5
        periodSeconds: 10

  stow:
    enabled: true
    replicaCount: 2
    image:
      repository: wms-stow
      tag: latest
    resources:
      requests:
        memory: "32Mi"
        cpu: "25m"
      limits:
        memory: "64Mi"
        cpu: "50m"
    healthCheck:
      enabled: true
      liveness:
        path: /health
        port: 80
        initialDelaySeconds: 10
        periodSeconds: 30
      readiness:
        path: /health
        port: 80
        initialDelaySeconds: 5
        periodSeconds: 10

  routing:
    enabled: true
    replicaCount: 2
    image:
      repository: wms-routing
      tag: latest
    resources:
      requests:
        memory: "32Mi"
        cpu: "25m"
      limits:
        memory: "64Mi"
        cpu: "50m"
    healthCheck:
      enabled: true
      liveness:
        path: /health
        port: 80
        initialDelaySeconds: 10
        periodSeconds: 30
      readiness:
        path: /health
        port: 80
        initialDelaySeconds: 5
        periodSeconds: 10

  walling:
    enabled: true
    replicaCount: 2
    image:
      repository: wms-walling
      tag: latest
    resources:
      requests:
        memory: "32Mi"
        cpu: "25m"
      limits:
        memory: "64Mi"
        cpu: "50m"
    healthCheck:
      enabled: true
      liveness:
        path: /health
        port: 80
        initialDelaySeconds: 10
        periodSeconds: 30
      readiness:
        path: /health
        port: 80
        initialDelaySeconds: 5
        periodSeconds: 10

  consolidation:
    enabled: true
    replicaCount: 2
    image:
      repository: wms-consolidation
      tag: latest
    resources:
      requests:
        memory: "32Mi"
        cpu: "25m"
      limits:
        memory: "64Mi"
        cpu: "50m"
    healthCheck:
      enabled: true
      liveness:
        path: /health
        port: 80
        initialDelaySeconds: 10
        periodSeconds: 30
      readiness:
        path: /health
        port: 80
        initialDelaySeconds: 5
        periodSeconds: 10

  sortation:
    enabled: true
    replicaCount: 2
    image:
      repository: wms-sortation
      tag: latest
    resources:
      requests:
        memory: "32Mi"
        cpu: "25m"
      limits:
        memory: "64Mi"
        cpu: "50m"
    healthCheck:
      enabled: true
      liveness:
        path: /health
        port: 80
        initialDelaySeconds: 10
        periodSeconds: 30
      readiness:
        path: /health
        port: 80
        initialDelaySeconds: 5
        periodSeconds: 10

  facility:
    enabled: true
    replicaCount: 2
    image:
      repository: wms-facility
      tag: latest
    resources:
      requests:
        memory: "32Mi"
        cpu: "25m"
      limits:
        memory: "64Mi"
        cpu: "50m"
    healthCheck:
      enabled: true
      liveness:
        path: /health
        port: 80
        initialDelaySeconds: 10
        periodSeconds: 30
      readiness:
        path: /health
        port: 80
        initialDelaySeconds: 5
        periodSeconds: 10

# Shared ConfigMap configuration
configMap:
  enabled: true
  name: wms-frontend-config
  data:
    # Kubernetes deployment flag
    VITE_K8S_DEPLOY: "true"

    # API Gateway (backend APIs)
    VITE_API_BASE_URL: "http://api-gateway.wms-platform.svc.cluster.local:8080"

    # WebSocket
    VITE_WS_ENABLED: "true"
    VITE_WS_BASE_URL: "ws://api-gateway.wms-platform.svc.cluster.local:8080"

    # Feature flags
    VITE_FEATURE_REALTIME: "true"
    VITE_FEATURE_ANALYTICS: "false"
    VITE_DEBUG: "false"

    # Microfrontend URLs (for shell to load remotes in K8s)
    # These are internal K8s service URLs - shell nginx proxies to these
    VITE_ORDERS_URL: "/remotes/orders"
    VITE_WAVES_URL: "/remotes/waves"
    VITE_INVENTORY_URL: "/remotes/inventory"
    VITE_PICKING_URL: "/remotes/picking"
    VITE_PACKING_URL: "/remotes/packing"
    VITE_SHIPPING_URL: "/remotes/shipping"
    VITE_LABOR_URL: "/remotes/labor"
    VITE_DASHBOARD_URL: "/remotes/dashboard"
    VITE_RECEIVING_URL: "/remotes/receiving"
    VITE_STOW_URL: "/remotes/stow"
    VITE_ROUTING_URL: "/remotes/routing"
    VITE_WALLING_URL: "/remotes/walling"
    VITE_CONSOLIDATION_URL: "/remotes/consolidation"
    VITE_SORTATION_URL: "/remotes/sortation"
    VITE_FACILITY_URL: "/remotes/facility"

# Ingress configuration
ingress:
  enabled: true
  className: nginx
  annotations:
    nginx.ingress.kubernetes.io/rewrite-target: /$1
    nginx.ingress.kubernetes.io/proxy-body-size: "10m"
    nginx.ingress.kubernetes.io/proxy-read-timeout: "60"
    nginx.ingress.kubernetes.io/proxy-send-timeout: "60"
  hosts:
    - host: wms.local
      paths:
        # Shell - catch-all
        - path: /(.*)
          pathType: Prefix
          service: shell
        # Microfrontends - for direct access
        - path: /mf/orders/(.*)
          pathType: Prefix
          service: orders
        - path: /mf/waves/(.*)
          pathType: Prefix
          service: waves
        - path: /mf/inventory/(.*)
          pathType: Prefix
          service: inventory
        - path: /mf/picking/(.*)
          pathType: Prefix
          service: picking
        - path: /mf/packing/(.*)
          pathType: Prefix
          service: packing
        - path: /mf/shipping/(.*)
          pathType: Prefix
          service: shipping
        - path: /mf/labor/(.*)
          pathType: Prefix
          service: labor
        - path: /mf/dashboard/(.*)
          pathType: Prefix
          service: dashboard
        - path: /mf/receiving/(.*)
          pathType: Prefix
          service: receiving
        - path: /mf/stow/(.*)
          pathType: Prefix
          service: stow
        - path: /mf/routing/(.*)
          pathType: Prefix
          service: routing
        - path: /mf/walling/(.*)
          pathType: Prefix
          service: walling
        - path: /mf/consolidation/(.*)
          pathType: Prefix
          service: consolidation
        - path: /mf/sortation/(.*)
          pathType: Prefix
          service: sortation
        - path: /mf/facility/(.*)
          pathType: Prefix
          service: facility
  tls: []
