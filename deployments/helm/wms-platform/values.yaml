# Gateway Configuration - Kong API Gateway with Gateway API
gateway:
  enabled: true
  namespace: kong
  httpPort: 80
  httpsPort: 443
  tls:
    enabled: true
    secretName: wms-tls-cert

# Global configuration
global:
  namespace: wms-platform
  imageRegistry: wms-platform
  imagePullPolicy: IfNotPresent
  environment: production
  region: us-east-1

# Service Account
serviceAccount:
  create: true
  name: wms-platform
  annotations: {}

# Platform-wide ConfigMap
platformConfig:
  enabled: true
  data:
    # Kafka Configuration
    KAFKA_BROKERS: "kafka-0.kafka-headless.wms-platform.svc.cluster.local:9092,kafka-1.kafka-headless.wms-platform.svc.cluster.local:9092,kafka-2.kafka-headless.wms-platform.svc.cluster.local:9092"
    KAFKA_CONSUMER_GROUP_PREFIX: "wms-platform"
    KAFKA_PRODUCER_ACKS: "all"
    KAFKA_PRODUCER_RETRIES: "3"

    # Temporal Configuration
    TEMPORAL_HOST: "temporal-frontend.wms-platform.svc.cluster.local:7233"
    TEMPORAL_NAMESPACE: "wms-platform"

    # Observability Configuration
    OTEL_EXPORTER_OTLP_ENDPOINT: "tempo.observability.svc.cluster.local:4317"
    TRACING_ENABLED: "true"
    METRICS_ENABLED: "true"

    # Logging Configuration
    LOG_LEVEL: "info"
    LOG_FORMAT: "json"

# MongoDB Secret (external secret reference)
mongodb:
  secretName: mongodb-credentials
  # Create secret if it doesn't exist (for development)
  createSecret: false
  # Secret data (only used if createSecret: true)
  uri: "mongodb://mongodb-0.mongodb-headless.wms-platform.svc.cluster.local:27017,mongodb-1.mongodb-headless.wms-platform.svc.cluster.local:27017,mongodb-2.mongodb-headless.wms-platform.svc.cluster.local:27017/?replicaSet=rs0"

# Services configuration
services:
  # Order Service - API + Worker
  order-service:
    enabled: true
    type: hybrid  # api, worker, or hybrid
    replicaCount: 3
    image:
      repository: order-service
      tag: latest

    ports:
      http: 8001
      grpc: 9001

    service:
      type: ClusterIP
      annotations: {}

    resources:
      requests:
        memory: "256Mi"
        cpu: "100m"
      limits:
        memory: "512Mi"
        cpu: "500m"

    autoscaling:
      enabled: true
      minReplicas: 3
      maxReplicas: 10
      targetCPUUtilizationPercentage: 70
      targetMemoryUtilizationPercentage: 80
      behavior:
        scaleDown:
          stabilizationWindowSeconds: 300
          policies:
            - type: Percent
              value: 50
              periodSeconds: 60
        scaleUp:
          stabilizationWindowSeconds: 0
          policies:
            - type: Percent
              value: 100
              periodSeconds: 30
            - type: Pods
              value: 2
              periodSeconds: 30
          selectPolicy: Max

    podDisruptionBudget:
      enabled: true
      minAvailable: 2

    env:
      - name: SERVICE_NAME
        value: "order-service"
      - name: MONGODB_DATABASE
        value: "orders_db"

    envFrom:
      - configMapRef:
          name: platform-config

    secrets:
      - name: MONGODB_URI
        valueFrom:
          secretKeyRef:
            name: mongodb-credentials
            key: uri

    healthCheck:
      liveness:
        path: /health
        port: http
        initialDelaySeconds: 30
        periodSeconds: 10
        timeoutSeconds: 5
        failureThreshold: 3
      readiness:
        path: /ready
        port: http
        initialDelaySeconds: 5
        periodSeconds: 5
        timeoutSeconds: 3
        failureThreshold: 3
      startup:
        path: /health
        port: http
        initialDelaySeconds: 0
        periodSeconds: 5
        timeoutSeconds: 3
        failureThreshold: 30

    podAnnotations:
      prometheus.io/scrape: "true"
      prometheus.io/port: "8001"
      prometheus.io/path: "/metrics"

    terminationGracePeriodSeconds: 30

  # Waving Service - API only
  waving-service:
    enabled: true
    type: api
    replicaCount: 3
    image:
      repository: waving-service
      tag: latest

    ports:
      http: 8002
      grpc: 9002

    service:
      type: ClusterIP

    resources:
      requests:
        memory: "256Mi"
        cpu: "100m"
      limits:
        memory: "512Mi"
        cpu: "500m"

    autoscaling:
      enabled: true
      minReplicas: 2
      maxReplicas: 8
      targetCPUUtilizationPercentage: 70
      targetMemoryUtilizationPercentage: 80

    podDisruptionBudget:
      enabled: true
      minAvailable: 1

    env:
      - name: SERVICE_NAME
        value: "waving-service"
      - name: MONGODB_DATABASE
        value: "waving_db"
      - name: CONTINUOUS_WAVING_ENABLED
        value: "true"

    envFrom:
      - configMapRef:
          name: platform-config

    secrets:
      - name: MONGODB_URI
        valueFrom:
          secretKeyRef:
            name: mongodb-credentials
            key: uri

    healthCheck:
      liveness:
        path: /health
        port: http
        initialDelaySeconds: 30
        periodSeconds: 10
      readiness:
        path: /ready
        port: http
        initialDelaySeconds: 5
        periodSeconds: 5
      startup:
        path: /health
        port: http
        periodSeconds: 5
        failureThreshold: 30

    podAnnotations:
      prometheus.io/scrape: "true"
      prometheus.io/port: "8002"
      prometheus.io/path: "/metrics"

    terminationGracePeriodSeconds: 30

  # Routing Service - API only
  routing-service:
    enabled: true
    type: api
    replicaCount: 3
    image:
      repository: routing-service
      tag: latest

    ports:
      http: 8003
      grpc: 9003

    service:
      type: ClusterIP

    resources:
      requests:
        memory: "256Mi"
        cpu: "100m"
      limits:
        memory: "512Mi"
        cpu: "500m"

    autoscaling:
      enabled: true
      minReplicas: 2
      maxReplicas: 8
      targetCPUUtilizationPercentage: 70
      targetMemoryUtilizationPercentage: 80

    podDisruptionBudget:
      enabled: true
      minAvailable: 1

    env:
      - name: SERVICE_NAME
        value: "routing-service"
      - name: MONGODB_DATABASE
        value: "routing_db"

    envFrom:
      - configMapRef:
          name: platform-config

    secrets:
      - name: MONGODB_URI
        valueFrom:
          secretKeyRef:
            name: mongodb-credentials
            key: uri

    healthCheck:
      liveness:
        path: /health
        port: http
        initialDelaySeconds: 30
        periodSeconds: 10
      readiness:
        path: /ready
        port: http
        initialDelaySeconds: 5
        periodSeconds: 5
      startup:
        path: /health
        port: http
        periodSeconds: 5
        failureThreshold: 30

    podAnnotations:
      prometheus.io/scrape: "true"
      prometheus.io/port: "8003"
      prometheus.io/path: "/metrics"

    terminationGracePeriodSeconds: 30

  # Picking Service - Hybrid (API + Worker)
  picking-service:
    enabled: true
    type: hybrid
    replicaCount: 3
    image:
      repository: picking-service
      tag: latest

    ports:
      http: 8004
      grpc: 9004

    service:
      type: ClusterIP

    resources:
      requests:
        memory: "256Mi"
        cpu: "100m"
      limits:
        memory: "512Mi"
        cpu: "500m"

    autoscaling:
      enabled: true
      minReplicas: 3
      maxReplicas: 10
      targetCPUUtilizationPercentage: 70
      targetMemoryUtilizationPercentage: 80

    podDisruptionBudget:
      enabled: true
      minAvailable: 2

    env:
      - name: SERVICE_NAME
        value: "picking-service"
      - name: MONGODB_DATABASE
        value: "picking_db"

    envFrom:
      - configMapRef:
          name: platform-config

    secrets:
      - name: MONGODB_URI
        valueFrom:
          secretKeyRef:
            name: mongodb-credentials
            key: uri

    healthCheck:
      liveness:
        path: /health
        port: http
        initialDelaySeconds: 30
        periodSeconds: 10
      readiness:
        path: /ready
        port: http
        initialDelaySeconds: 5
        periodSeconds: 5
      startup:
        path: /health
        port: http
        periodSeconds: 5
        failureThreshold: 30

    podAnnotations:
      prometheus.io/scrape: "true"
      prometheus.io/port: "8004"
      prometheus.io/path: "/metrics"

    terminationGracePeriodSeconds: 30

  # Consolidation Service - Hybrid (API + Worker)
  consolidation-service:
    enabled: true
    type: hybrid
    replicaCount: 3
    image:
      repository: consolidation-service
      tag: latest

    ports:
      http: 8005
      grpc: 9005

    service:
      type: ClusterIP

    resources:
      requests:
        memory: "256Mi"
        cpu: "100m"
      limits:
        memory: "512Mi"
        cpu: "500m"

    autoscaling:
      enabled: true
      minReplicas: 2
      maxReplicas: 8
      targetCPUUtilizationPercentage: 70
      targetMemoryUtilizationPercentage: 80

    podDisruptionBudget:
      enabled: true
      minAvailable: 1

    env:
      - name: SERVICE_NAME
        value: "consolidation-service"
      - name: MONGODB_DATABASE
        value: "consolidation_db"

    envFrom:
      - configMapRef:
          name: platform-config

    secrets:
      - name: MONGODB_URI
        valueFrom:
          secretKeyRef:
            name: mongodb-credentials
            key: uri

    healthCheck:
      liveness:
        path: /health
        port: http
        initialDelaySeconds: 30
        periodSeconds: 10
      readiness:
        path: /ready
        port: http
        initialDelaySeconds: 5
        periodSeconds: 5
      startup:
        path: /health
        port: http
        periodSeconds: 5
        failureThreshold: 30

    podAnnotations:
      prometheus.io/scrape: "true"
      prometheus.io/port: "8005"
      prometheus.io/path: "/metrics"

    terminationGracePeriodSeconds: 30

  # Packing Service - Hybrid (API + Worker)
  packing-service:
    enabled: true
    type: hybrid
    replicaCount: 3
    image:
      repository: packing-service
      tag: latest

    ports:
      http: 8006
      grpc: 9006

    service:
      type: ClusterIP

    resources:
      requests:
        memory: "256Mi"
        cpu: "100m"
      limits:
        memory: "512Mi"
        cpu: "500m"

    autoscaling:
      enabled: true
      minReplicas: 2
      maxReplicas: 8
      targetCPUUtilizationPercentage: 70
      targetMemoryUtilizationPercentage: 80

    podDisruptionBudget:
      enabled: true
      minAvailable: 1

    env:
      - name: SERVICE_NAME
        value: "packing-service"
      - name: MONGODB_DATABASE
        value: "packing_db"

    envFrom:
      - configMapRef:
          name: platform-config

    secrets:
      - name: MONGODB_URI
        valueFrom:
          secretKeyRef:
            name: mongodb-credentials
            key: uri

    healthCheck:
      liveness:
        path: /health
        port: http
        initialDelaySeconds: 30
        periodSeconds: 10
      readiness:
        path: /ready
        port: http
        initialDelaySeconds: 5
        periodSeconds: 5
      startup:
        path: /health
        port: http
        periodSeconds: 5
        failureThreshold: 30

    podAnnotations:
      prometheus.io/scrape: "true"
      prometheus.io/port: "8006"
      prometheus.io/path: "/metrics"

    terminationGracePeriodSeconds: 30

  # Shipping Service - Hybrid (API + Worker)
  shipping-service:
    enabled: true
    type: hybrid
    replicaCount: 3
    image:
      repository: shipping-service
      tag: latest

    ports:
      http: 8007
      grpc: 9007

    service:
      type: ClusterIP

    resources:
      requests:
        memory: "256Mi"
        cpu: "100m"
      limits:
        memory: "512Mi"
        cpu: "500m"

    autoscaling:
      enabled: true
      minReplicas: 2
      maxReplicas: 8
      targetCPUUtilizationPercentage: 70
      targetMemoryUtilizationPercentage: 80

    podDisruptionBudget:
      enabled: true
      minAvailable: 1

    env:
      - name: SERVICE_NAME
        value: "shipping-service"
      - name: MONGODB_DATABASE
        value: "shipping_db"

    envFrom:
      - configMapRef:
          name: platform-config

    secrets:
      - name: MONGODB_URI
        valueFrom:
          secretKeyRef:
            name: mongodb-credentials
            key: uri

    healthCheck:
      liveness:
        path: /health
        port: http
        initialDelaySeconds: 30
        periodSeconds: 10
      readiness:
        path: /ready
        port: http
        initialDelaySeconds: 5
        periodSeconds: 5
      startup:
        path: /health
        port: http
        periodSeconds: 5
        failureThreshold: 30

    podAnnotations:
      prometheus.io/scrape: "true"
      prometheus.io/port: "8007"
      prometheus.io/path: "/metrics"

    terminationGracePeriodSeconds: 30

  # Inventory Service - API only
  inventory-service:
    enabled: true
    type: api
    replicaCount: 3
    image:
      repository: inventory-service
      tag: latest

    ports:
      http: 8008
      grpc: 9008

    service:
      type: ClusterIP

    resources:
      requests:
        memory: "256Mi"
        cpu: "100m"
      limits:
        memory: "512Mi"
        cpu: "500m"

    autoscaling:
      enabled: true
      minReplicas: 3
      maxReplicas: 10
      targetCPUUtilizationPercentage: 70
      targetMemoryUtilizationPercentage: 80

    podDisruptionBudget:
      enabled: true
      minAvailable: 2

    env:
      - name: SERVICE_NAME
        value: "inventory-service"
      - name: MONGODB_DATABASE
        value: "inventory_db"

    envFrom:
      - configMapRef:
          name: platform-config

    secrets:
      - name: MONGODB_URI
        valueFrom:
          secretKeyRef:
            name: mongodb-credentials
            key: uri

    healthCheck:
      liveness:
        path: /health
        port: http
        initialDelaySeconds: 30
        periodSeconds: 10
      readiness:
        path: /ready
        port: http
        initialDelaySeconds: 5
        periodSeconds: 5
      startup:
        path: /health
        port: http
        periodSeconds: 5
        failureThreshold: 30

    podAnnotations:
      prometheus.io/scrape: "true"
      prometheus.io/port: "8008"
      prometheus.io/path: "/metrics"

    terminationGracePeriodSeconds: 30

  # Labor Service - API only
  labor-service:
    enabled: true
    type: api
    replicaCount: 2
    image:
      repository: labor-service
      tag: latest

    ports:
      http: 8009
      grpc: 9009

    service:
      type: ClusterIP

    resources:
      requests:
        memory: "256Mi"
        cpu: "100m"
      limits:
        memory: "512Mi"
        cpu: "500m"

    autoscaling:
      enabled: true
      minReplicas: 2
      maxReplicas: 6
      targetCPUUtilizationPercentage: 70
      targetMemoryUtilizationPercentage: 80

    podDisruptionBudget:
      enabled: true
      minAvailable: 1

    env:
      - name: SERVICE_NAME
        value: "labor-service"
      - name: MONGODB_DATABASE
        value: "labor_db"

    envFrom:
      - configMapRef:
          name: platform-config

    secrets:
      - name: MONGODB_URI
        valueFrom:
          secretKeyRef:
            name: mongodb-credentials
            key: uri

    healthCheck:
      liveness:
        path: /health
        port: http
        initialDelaySeconds: 30
        periodSeconds: 10
      readiness:
        path: /ready
        port: http
        initialDelaySeconds: 5
        periodSeconds: 5
      startup:
        path: /health
        port: http
        periodSeconds: 5
        failureThreshold: 30

    podAnnotations:
      prometheus.io/scrape: "true"
      prometheus.io/port: "8009"
      prometheus.io/path: "/metrics"

    terminationGracePeriodSeconds: 30

  # Facility Service - API only (Station management, process path routing)
  facility-service:
    enabled: true
    type: api
    replicaCount: 3
    image:
      repository: facility-service
      tag: latest

    ports:
      http: 8010
      grpc: 9010

    service:
      type: ClusterIP

    resources:
      requests:
        memory: "256Mi"
        cpu: "100m"
      limits:
        memory: "512Mi"
        cpu: "500m"

    autoscaling:
      enabled: true
      minReplicas: 3
      maxReplicas: 10
      targetCPUUtilizationPercentage: 70
      targetMemoryUtilizationPercentage: 80

    podDisruptionBudget:
      enabled: true
      minAvailable: 2

    env:
      - name: SERVICE_NAME
        value: "facility-service"
      - name: MONGODB_DATABASE
        value: "facility_db"

    envFrom:
      - configMapRef:
          name: platform-config

    secrets:
      - name: MONGODB_URI
        valueFrom:
          secretKeyRef:
            name: mongodb-credentials
            key: uri

    healthCheck:
      liveness:
        path: /health
        port: http
        initialDelaySeconds: 30
        periodSeconds: 10
      readiness:
        path: /ready
        port: http
        initialDelaySeconds: 5
        periodSeconds: 5
      startup:
        path: /health
        port: http
        periodSeconds: 5
        failureThreshold: 30

    podAnnotations:
      prometheus.io/scrape: "true"
      prometheus.io/port: "8010"
      prometheus.io/path: "/metrics"

    terminationGracePeriodSeconds: 30

  # Unit Service - API only (Unit-level tracking)
  unit-service:
    enabled: true
    type: api
    replicaCount: 3
    image:
      repository: unit-service
      tag: latest

    ports:
      http: 8014
      grpc: 9014

    service:
      type: ClusterIP

    resources:
      requests:
        memory: "256Mi"
        cpu: "100m"
      limits:
        memory: "512Mi"
        cpu: "500m"

    autoscaling:
      enabled: true
      minReplicas: 3
      maxReplicas: 10
      targetCPUUtilizationPercentage: 70
      targetMemoryUtilizationPercentage: 80

    podDisruptionBudget:
      enabled: true
      minAvailable: 2

    env:
      - name: SERVICE_NAME
        value: "unit-service"
      - name: MONGODB_DATABASE
        value: "unit_db"

    envFrom:
      - configMapRef:
          name: platform-config

    secrets:
      - name: MONGODB_URI
        valueFrom:
          secretKeyRef:
            name: mongodb-credentials
            key: uri

    healthCheck:
      liveness:
        path: /health
        port: http
        initialDelaySeconds: 30
        periodSeconds: 10
      readiness:
        path: /ready
        port: http
        initialDelaySeconds: 5
        periodSeconds: 5
      startup:
        path: /health
        port: http
        periodSeconds: 5
        failureThreshold: 30

    podAnnotations:
      prometheus.io/scrape: "true"
      prometheus.io/port: "8014"
      prometheus.io/path: "/metrics"

    terminationGracePeriodSeconds: 30

  # Process Path Service - API only (Process path determination)
  process-path-service:
    enabled: true
    type: api
    replicaCount: 2
    image:
      repository: process-path-service
      tag: latest

    ports:
      http: 8015
      grpc: 9015

    service:
      type: ClusterIP

    resources:
      requests:
        memory: "256Mi"
        cpu: "100m"
      limits:
        memory: "512Mi"
        cpu: "500m"

    autoscaling:
      enabled: true
      minReplicas: 2
      maxReplicas: 8
      targetCPUUtilizationPercentage: 70
      targetMemoryUtilizationPercentage: 80

    podDisruptionBudget:
      enabled: true
      minAvailable: 1

    env:
      - name: SERVICE_NAME
        value: "process-path-service"
      - name: MONGODB_DATABASE
        value: "process_path_db"

    envFrom:
      - configMapRef:
          name: platform-config

    secrets:
      - name: MONGODB_URI
        valueFrom:
          secretKeyRef:
            name: mongodb-credentials
            key: uri

    healthCheck:
      liveness:
        path: /health
        port: http
        initialDelaySeconds: 30
        periodSeconds: 10
      readiness:
        path: /ready
        port: http
        initialDelaySeconds: 5
        periodSeconds: 5
      startup:
        path: /health
        port: http
        periodSeconds: 5
        failureThreshold: 30

    podAnnotations:
      prometheus.io/scrape: "true"
      prometheus.io/port: "8015"
      prometheus.io/path: "/metrics"

    terminationGracePeriodSeconds: 30

  # Receiving Service - API only (Inbound shipment receiving)
  receiving-service:
    enabled: true
    type: api
    replicaCount: 3
    image:
      repository: receiving-service
      tag: latest

    ports:
      http: 8013
      grpc: 9013

    service:
      type: ClusterIP

    resources:
      requests:
        memory: "256Mi"
        cpu: "100m"
      limits:
        memory: "512Mi"
        cpu: "500m"

    autoscaling:
      enabled: true
      minReplicas: 2
      maxReplicas: 8
      targetCPUUtilizationPercentage: 70
      targetMemoryUtilizationPercentage: 80

    podDisruptionBudget:
      enabled: true
      minAvailable: 1

    env:
      - name: SERVICE_NAME
        value: "receiving-service"
      - name: MONGODB_DATABASE
        value: "receiving_db"
      - name: SERVER_ADDR
        value: ":8013"

    envFrom:
      - configMapRef:
          name: platform-config

    secrets:
      - name: MONGODB_URI
        valueFrom:
          secretKeyRef:
            name: mongodb-credentials
            key: uri

    healthCheck:
      liveness:
        path: /health
        port: http
        initialDelaySeconds: 30
        periodSeconds: 10
      readiness:
        path: /ready
        port: http
        initialDelaySeconds: 5
        periodSeconds: 5
      startup:
        path: /health
        port: http
        periodSeconds: 5
        failureThreshold: 30

    podAnnotations:
      prometheus.io/scrape: "true"
      prometheus.io/port: "8013"
      prometheus.io/path: "/metrics"

    terminationGracePeriodSeconds: 30

  # Stow Service - API only (Putaway tasks and storage)
  stow-service:
    enabled: true
    type: api
    replicaCount: 3
    image:
      repository: stow-service
      tag: latest

    ports:
      http: 8011
      grpc: 9011

    service:
      type: ClusterIP

    resources:
      requests:
        memory: "256Mi"
        cpu: "100m"
      limits:
        memory: "512Mi"
        cpu: "500m"

    autoscaling:
      enabled: true
      minReplicas: 2
      maxReplicas: 8
      targetCPUUtilizationPercentage: 70
      targetMemoryUtilizationPercentage: 80

    podDisruptionBudget:
      enabled: true
      minAvailable: 1

    env:
      - name: SERVICE_NAME
        value: "stow-service"
      - name: MONGODB_DATABASE
        value: "stow_db"

    envFrom:
      - configMapRef:
          name: platform-config

    secrets:
      - name: MONGODB_URI
        valueFrom:
          secretKeyRef:
            name: mongodb-credentials
            key: uri

    healthCheck:
      liveness:
        path: /health
        port: http
        initialDelaySeconds: 30
        periodSeconds: 10
      readiness:
        path: /ready
        port: http
        initialDelaySeconds: 5
        periodSeconds: 5
      startup:
        path: /health
        port: http
        periodSeconds: 5
        failureThreshold: 30

    podAnnotations:
      prometheus.io/scrape: "true"
      prometheus.io/port: "8011"
      prometheus.io/path: "/metrics"

    terminationGracePeriodSeconds: 30

  # Sortation Service - API only (Package sortation by destination)
  sortation-service:
    enabled: true
    type: api
    replicaCount: 3
    image:
      repository: sortation-service
      tag: latest

    ports:
      http: 8012
      grpc: 9012

    service:
      type: ClusterIP

    resources:
      requests:
        memory: "256Mi"
        cpu: "100m"
      limits:
        memory: "512Mi"
        cpu: "500m"

    autoscaling:
      enabled: true
      minReplicas: 2
      maxReplicas: 8
      targetCPUUtilizationPercentage: 70
      targetMemoryUtilizationPercentage: 80

    podDisruptionBudget:
      enabled: true
      minAvailable: 1

    env:
      - name: SERVICE_NAME
        value: "sortation-service"
      - name: MONGODB_DATABASE
        value: "sortation_db"

    envFrom:
      - configMapRef:
          name: platform-config

    secrets:
      - name: MONGODB_URI
        valueFrom:
          secretKeyRef:
            name: mongodb-credentials
            key: uri

    healthCheck:
      liveness:
        path: /health
        port: http
        initialDelaySeconds: 30
        periodSeconds: 10
      readiness:
        path: /ready
        port: http
        initialDelaySeconds: 5
        periodSeconds: 5
      startup:
        path: /health
        port: http
        periodSeconds: 5
        failureThreshold: 30

    podAnnotations:
      prometheus.io/scrape: "true"
      prometheus.io/port: "8012"
      prometheus.io/path: "/metrics"

    terminationGracePeriodSeconds: 30

  # WES Service - Warehouse Execution System (Hybrid: API + Worker)
  wes-service:
    enabled: true
    type: hybrid
    replicaCount: 3
    image:
      repository: wes-service
      tag: latest

    ports:
      http: 8016
      grpc: 9016

    service:
      type: ClusterIP

    resources:
      requests:
        memory: "256Mi"
        cpu: "100m"
      limits:
        memory: "512Mi"
        cpu: "500m"

    autoscaling:
      enabled: true
      minReplicas: 3
      maxReplicas: 10
      targetCPUUtilizationPercentage: 70
      targetMemoryUtilizationPercentage: 80

    podDisruptionBudget:
      enabled: true
      minAvailable: 2

    env:
      - name: SERVICE_NAME
        value: "wes-service"
      - name: SERVER_ADDR
        value: ":8016"
      - name: MONGODB_DATABASE
        value: "wes_db"
      - name: TEMPORAL_TASK_QUEUE
        value: "wes-execution-queue"

    envFrom:
      - configMapRef:
          name: platform-config

    secrets:
      - name: MONGODB_URI
        valueFrom:
          secretKeyRef:
            name: mongodb-credentials
            key: uri

    healthCheck:
      liveness:
        path: /health
        port: http
        initialDelaySeconds: 30
        periodSeconds: 10
      readiness:
        path: /ready
        port: http
        initialDelaySeconds: 5
        periodSeconds: 5
      startup:
        path: /health
        port: http
        periodSeconds: 5
        failureThreshold: 30

    podAnnotations:
      prometheus.io/scrape: "true"
      prometheus.io/port: "8016"
      prometheus.io/path: "/metrics"

    terminationGracePeriodSeconds: 60

  # Walling Service - Wall/Put-wall sorting operations
  walling-service:
    enabled: true
    type: api
    replicaCount: 3
    image:
      repository: walling-service
      tag: latest

    ports:
      http: 8017
      grpc: 9017

    service:
      type: ClusterIP

    resources:
      requests:
        memory: "256Mi"
        cpu: "100m"
      limits:
        memory: "512Mi"
        cpu: "500m"

    autoscaling:
      enabled: true
      minReplicas: 2
      maxReplicas: 8
      targetCPUUtilizationPercentage: 70
      targetMemoryUtilizationPercentage: 80

    podDisruptionBudget:
      enabled: true
      minAvailable: 1

    env:
      - name: SERVICE_NAME
        value: "walling-service"
      - name: SERVER_ADDR
        value: ":8017"
      - name: MONGODB_DATABASE
        value: "walling_db"

    envFrom:
      - configMapRef:
          name: platform-config

    secrets:
      - name: MONGODB_URI
        valueFrom:
          secretKeyRef:
            name: mongodb-credentials
            key: uri

    healthCheck:
      liveness:
        path: /health
        port: http
        initialDelaySeconds: 30
        periodSeconds: 10
      readiness:
        path: /ready
        port: http
        initialDelaySeconds: 5
        periodSeconds: 5
      startup:
        path: /health
        port: http
        periodSeconds: 5
        failureThreshold: 30

    podAnnotations:
      prometheus.io/scrape: "true"
      prometheus.io/port: "8017"
      prometheus.io/path: "/metrics"

    terminationGracePeriodSeconds: 30

  # Billing Service - Billable activity tracking and invoicing
  billing-service:
    enabled: true
    type: api
    replicaCount: 3
    image:
      repository: billing-service
      tag: latest

    ports:
      http: 8018
      grpc: 9018

    service:
      type: ClusterIP

    resources:
      requests:
        memory: "256Mi"
        cpu: "100m"
      limits:
        memory: "512Mi"
        cpu: "500m"

    autoscaling:
      enabled: true
      minReplicas: 2
      maxReplicas: 8
      targetCPUUtilizationPercentage: 70
      targetMemoryUtilizationPercentage: 80

    podDisruptionBudget:
      enabled: true
      minAvailable: 1

    env:
      - name: SERVICE_NAME
        value: "billing-service"
      - name: SERVER_ADDR
        value: ":8018"
      - name: MONGODB_DATABASE
        value: "billing_db"

    envFrom:
      - configMapRef:
          name: platform-config

    secrets:
      - name: MONGODB_URI
        valueFrom:
          secretKeyRef:
            name: mongodb-credentials
            key: uri

    healthCheck:
      liveness:
        path: /health
        port: http
        initialDelaySeconds: 30
        periodSeconds: 10
      readiness:
        path: /ready
        port: http
        initialDelaySeconds: 5
        periodSeconds: 5
      startup:
        path: /health
        port: http
        periodSeconds: 5
        failureThreshold: 30

    podAnnotations:
      prometheus.io/scrape: "true"
      prometheus.io/port: "8018"
      prometheus.io/path: "/metrics"

    terminationGracePeriodSeconds: 30

  # Channel Service - Multi-channel order synchronization
  channel-service:
    enabled: true
    type: api
    replicaCount: 3
    image:
      repository: channel-service
      tag: latest

    ports:
      http: 8019
      grpc: 9019

    service:
      type: ClusterIP

    resources:
      requests:
        memory: "256Mi"
        cpu: "100m"
      limits:
        memory: "512Mi"
        cpu: "500m"

    autoscaling:
      enabled: true
      minReplicas: 2
      maxReplicas: 8
      targetCPUUtilizationPercentage: 70
      targetMemoryUtilizationPercentage: 80

    podDisruptionBudget:
      enabled: true
      minAvailable: 1

    env:
      - name: SERVICE_NAME
        value: "channel-service"
      - name: SERVER_ADDR
        value: ":8019"
      - name: MONGODB_DATABASE
        value: "channel_db"

    envFrom:
      - configMapRef:
          name: platform-config

    secrets:
      - name: MONGODB_URI
        valueFrom:
          secretKeyRef:
            name: mongodb-credentials
            key: uri

    healthCheck:
      liveness:
        path: /health
        port: http
        initialDelaySeconds: 30
        periodSeconds: 10
      readiness:
        path: /ready
        port: http
        initialDelaySeconds: 5
        periodSeconds: 5
      startup:
        path: /health
        port: http
        periodSeconds: 5
        failureThreshold: 30

    podAnnotations:
      prometheus.io/scrape: "true"
      prometheus.io/port: "8019"
      prometheus.io/path: "/metrics"

    terminationGracePeriodSeconds: 30

  # Seller Service - Seller/merchant account management
  seller-service:
    enabled: true
    type: api
    replicaCount: 3
    image:
      repository: seller-service
      tag: latest

    ports:
      http: 8020
      grpc: 9020

    service:
      type: ClusterIP

    resources:
      requests:
        memory: "256Mi"
        cpu: "100m"
      limits:
        memory: "512Mi"
        cpu: "500m"

    autoscaling:
      enabled: true
      minReplicas: 2
      maxReplicas: 8
      targetCPUUtilizationPercentage: 70
      targetMemoryUtilizationPercentage: 80

    podDisruptionBudget:
      enabled: true
      minAvailable: 1

    env:
      - name: SERVICE_NAME
        value: "seller-service"
      - name: SERVER_ADDR
        value: ":8020"
      - name: MONGODB_DATABASE
        value: "sellers_db"

    envFrom:
      - configMapRef:
          name: platform-config

    secrets:
      - name: MONGODB_URI
        valueFrom:
          secretKeyRef:
            name: mongodb-credentials
            key: uri

    healthCheck:
      liveness:
        path: /health
        port: http
        initialDelaySeconds: 30
        periodSeconds: 10
      readiness:
        path: /ready
        port: http
        initialDelaySeconds: 5
        periodSeconds: 5
      startup:
        path: /health
        port: http
        periodSeconds: 5
        failureThreshold: 30

    podAnnotations:
      prometheus.io/scrape: "true"
      prometheus.io/port: "8020"
      prometheus.io/path: "/metrics"

    terminationGracePeriodSeconds: 30

  # Seller Portal - Backend-for-Frontend for seller dashboard
  seller-portal:
    enabled: true
    type: api
    replicaCount: 2
    image:
      repository: seller-portal
      tag: latest

    ports:
      http: 8021

    service:
      type: ClusterIP

    resources:
      requests:
        memory: "128Mi"
        cpu: "50m"
      limits:
        memory: "256Mi"
        cpu: "200m"

    autoscaling:
      enabled: true
      minReplicas: 2
      maxReplicas: 6
      targetCPUUtilizationPercentage: 70
      targetMemoryUtilizationPercentage: 80

    podDisruptionBudget:
      enabled: true
      minAvailable: 1

    env:
      - name: SERVICE_NAME
        value: "seller-portal"
      - name: SERVER_ADDR
        value: ":8021"
      - name: SELLER_SERVICE_URL
        value: "http://seller-service.wms-platform.svc.cluster.local:8020"
      - name: ORDER_SERVICE_URL
        value: "http://order-service.wms-platform.svc.cluster.local:8001"
      - name: INVENTORY_SERVICE_URL
        value: "http://inventory-service.wms-platform.svc.cluster.local:8008"
      - name: BILLING_SERVICE_URL
        value: "http://billing-service.wms-platform.svc.cluster.local:8018"
      - name: CHANNEL_SERVICE_URL
        value: "http://channel-service.wms-platform.svc.cluster.local:8019"

    envFrom:
      - configMapRef:
          name: platform-config

    secrets: []

    healthCheck:
      liveness:
        path: /health
        port: http
        initialDelaySeconds: 10
        periodSeconds: 10
      readiness:
        path: /ready
        port: http
        initialDelaySeconds: 5
        periodSeconds: 5
      startup:
        path: /health
        port: http
        periodSeconds: 5
        failureThreshold: 20

    podAnnotations:
      prometheus.io/scrape: "true"
      prometheus.io/port: "8021"
      prometheus.io/path: "/metrics"

    terminationGracePeriodSeconds: 30

  # Orchestrator - Worker only
  orchestrator:
    enabled: true
    type: worker
    replicaCount: 3
    image:
      repository: orchestrator
      tag: latest

    ports:
      metrics: 8080

    service:
      enabled: false  # No service needed for worker-only

    resources:
      requests:
        memory: "512Mi"
        cpu: "200m"
      limits:
        memory: "1Gi"
        cpu: "1000m"

    autoscaling:
      enabled: true
      minReplicas: 3
      maxReplicas: 10
      targetCPUUtilizationPercentage: 70
      targetMemoryUtilizationPercentage: 80

    podDisruptionBudget:
      enabled: true
      minAvailable: 2

    env:
      - name: SERVICE_NAME
        value: "orchestrator"
      - name: TEMPORAL_TASK_QUEUE
        value: "order-fulfillment"
      - name: TEMPORAL_WORKER_CONCURRENCY
        value: "10"

    envFrom:
      - configMapRef:
          name: platform-config

    secrets: []

    healthCheck:
      liveness:
        path: /health
        port: metrics
        initialDelaySeconds: 30
        periodSeconds: 10
      readiness:
        path: /ready
        port: metrics
        initialDelaySeconds: 10
        periodSeconds: 5
      startup:
        path: /health
        port: metrics
        periodSeconds: 5
        failureThreshold: 30

    podAnnotations:
      prometheus.io/scrape: "true"
      prometheus.io/port: "8080"
      prometheus.io/path: "/metrics"

    terminationGracePeriodSeconds: 60  # Longer for workflow completion

  # Wave UI - React Frontend
  wave-ui:
    enabled: true
    type: frontend
    replicaCount: 2
    image:
      repository: wave-ui
      tag: latest

    ports:
      http: 80

    service:
      type: ClusterIP

    resources:
      requests:
        memory: "64Mi"
        cpu: "50m"
      limits:
        memory: "128Mi"
        cpu: "200m"

    autoscaling:
      enabled: false

    podDisruptionBudget:
      enabled: true
      minAvailable: 1

    env: []

    envFrom: []

    secrets: []

    healthCheck:
      liveness:
        path: /health
        port: http
        initialDelaySeconds: 5
        periodSeconds: 10
      readiness:
        path: /health
        port: http
        initialDelaySeconds: 3
        periodSeconds: 5
      startup:
        path: /health
        port: http
        periodSeconds: 3
        failureThreshold: 10

    podAnnotations: {}

    terminationGracePeriodSeconds: 10
