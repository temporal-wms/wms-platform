# OpenMetadata Helm Values for Data Mesh Catalog
# Chart: openmetadata/openmetadata

# Image configuration
image:
  repository: openmetadata/server
  tag: "1.3.1"
  pullPolicy: IfNotPresent

# OpenMetadata configuration
openmetadata:
  config:
    # Authentication (basic for dev)
    authentication:
      provider: "basic"
      publicKeyUrls:
        - "http://localhost:8585/api/v1/system/config/jwks"
      authority: "http://localhost:8585/api/v1/system/config/authorizer"
      callbackUrl: "http://localhost:8585/callback"
    # Database
    database:
      host: openmetadata-mysql
      port: 3306
      driverClass: com.mysql.cj.jdbc.Driver
      dbScheme: mysql
      dbParams: "allowPublicKeyRetrieval=true&useSSL=false"
    # Search
    elasticsearch:
      host: openmetadata-elasticsearch
      port: 9200
      scheme: http

# Resources
resources:
  requests:
    memory: "1Gi"
    cpu: "500m"
  limits:
    memory: "2Gi"
    cpu: "1000m"

# Service
service:
  type: NodePort
  port: 8585

# Dependencies
mysql:
  enabled: true
  auth:
    rootPassword: openmetadata
    database: openmetadata_db
  primary:
    persistence:
      enabled: true
      size: 10Gi

elasticsearch:
  enabled: true
  replicas: 1
  minimumMasterNodes: 1
  resources:
    requests:
      cpu: "500m"
      memory: "1Gi"
    limits:
      cpu: "1000m"
      memory: "2Gi"
  persistence:
    enabled: true

# Service monitors for Prometheus (disabled)
serviceMonitor:
  enabled: false
