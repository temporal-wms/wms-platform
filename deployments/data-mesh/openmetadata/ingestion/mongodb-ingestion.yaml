# OpenMetadata MongoDB Ingestion Configuration
# Discovers operational MongoDB collections and registers them in the catalog

source:
  type: mongodb
  serviceName: wms-operational-db
  serviceConnection:
    config:
      type: MongoDB
      hostPort: mongodb.wms-platform-dev.svc.cluster.local:27017
      username: ${MONGODB_USER}
      password: ${MONGODB_PASSWORD}
      databaseName: wms
  sourceConfig:
    config:
      type: DatabaseMetadata
      markDeletedTables: true
      includeTables: true
      includeViews: false
      schemaFilterPattern:
        includes:
          - "wms"
      tableFilterPattern:
        includes:
          - "orders"
          - "inventory"
          - "waves"
          - "pick_tasks"
          - "pack_tasks"
          - "shipments"
          - "routes"
          - "consolidations"
          - "workers"
        excludes:
          - "outbox_events"
          - ".*_projections"

sink:
  type: metadata-rest
  config: {}

workflowConfig:
  loggerLevel: INFO
  openMetadataServerConfig:
    hostPort: http://openmetadata.data-mesh.svc.cluster.local:8585/api
    authProvider: no-auth
---
# Lineage extraction from CDC events to Lakehouse
source:
  type: lineage
  serviceName: wms-data-lineage
  sourceConfig:
    config:
      type: DatabaseLineage
      queryLogDuration: 30
      parsingTimeoutLimit: 300

sink:
  type: metadata-rest
  config: {}

workflowConfig:
  loggerLevel: INFO
  openMetadataServerConfig:
    hostPort: http://openmetadata.data-mesh.svc.cluster.local:8585/api
    authProvider: no-auth
